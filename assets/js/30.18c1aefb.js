(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{655:function(s,t,e){"use strict";e.r(t);var n=e(14),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"全文搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全文搜索"}},[s._v("#")]),s._v(" 全文搜索")]),s._v(" "),e("p",[s._v("为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。在对表列进行适当设计后，MySQL会自动进行所有的索引和重新索引。")]),s._v(" "),e("p",[s._v("启动全文搜索（仅在MyISAM数据库引擎中支持全文本搜索）：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE productnotes\n(\n\tnote_id int NOT NULL AUTO_INCREMENT,\n    note_text text NULL,\n    PRIMARY KEY(note_id),\n    FULLTEXT(note_text)\n) ENGINE=MyISAM;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("在定义之后，MySQL自动维护该索引。在增加、更新或删除行时，索引随之自动更新。")]),s._v(" "),e("p",[s._v("不要在导入数据时使用FULLTEXT，。应该首先导入所有数据，然后再修改表，定义FULLTEXT，这样可以更快导入数据。")]),s._v(" "),e("p",[s._v("使用全文搜索：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT note_text\nFROM productnotes\nWHERE Match(note_text) Against('shoe'); #Match指定搜索列，Against指定搜索词\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("返回结果："),e("code",[s._v("nike shoes is good")]),s._v("，搜索不区分大小写。")]),s._v(" "),e("p",[s._v("全文搜索会对返回结果进行排序，具有高等级的行先返回：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT note_text,\n\tMatch(note_text) Against('shoes') AS rank #等级由MySQL根据行中词的数目、唯一词的数目、整个索引中词的总数以及包含该词的行的数目计算出来。\nFROM productnotes;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("全文搜索数据是有索引的，速度快。")])])}),[],!1,null,null,null);t.default=a.exports}}]);