(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{661:function(s,a,e){"use strict";e.r(a);var t=e(14),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),e("p",[s._v("SQL 结构化查询语言。")]),s._v(" "),e("h3",{attrs:{id:"数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[s._v("#")]),s._v(" 数据类型")]),s._v(" "),e("p",[s._v("主要包括以下五大类：")]),s._v(" "),e("p",[s._v("整数类型：BIT、BOOL、TINY INT、SMALL INT、MEDIUM INT、 INT、 BIG INT")]),s._v(" "),e("p",[s._v("浮点数类型：FLOAT、DOUBLE、DECIMAL")]),s._v(" "),e("p",[s._v("字符串类型：CHAR、VARCHAR、TINY TEXT、TEXT、MEDIUM TEXT、LONGTEXT、TINY BLOB、BLOB、MEDIUM BLOB、LONG BLOB")]),s._v(" "),e("p",[s._v("日期类型：Date、DateTime、TimeStamp、Time、Year")]),s._v(" "),e("p",[s._v("其他数据类型：BINARY、VARBINARY、ENUM、SET、Geometry、Point、MultiPoint、LineString、MultiLineString、Polygon、GeometryCollection等")]),s._v(" "),e("h4",{attrs:{id:"整型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#整型"}},[s._v("#")]),s._v(" 整型")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("MySQL数据类型")]),s._v(" "),e("th",[s._v("含义（有符号）")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("tinyint(m)")]),s._v(" "),e("td",[s._v("1个字节 范围(-128~127)")])]),s._v(" "),e("tr",[e("td",[s._v("smallint(m)")]),s._v(" "),e("td",[s._v("2个字节 范围(-32768~32767)")])]),s._v(" "),e("tr",[e("td",[s._v("mediumint(m)")]),s._v(" "),e("td",[s._v("3个字节 范围(-8388608~8388607)")])]),s._v(" "),e("tr",[e("td",[s._v("int(m)")]),s._v(" "),e("td",[s._v("4个字节 范围(-2147483648~2147483647)")])]),s._v(" "),e("tr",[e("td",[s._v("bigint(m)")]),s._v(" "),e("td",[s._v("8个字节 范围(+-9.22*10的18次方)")])])])]),s._v(" "),e("p",[s._v("int(m) m 用于指定显示宽度，int(5)表示5位数的宽度。注意显示宽度属性不能控制列可以存储的值范围，显示宽度属性通常由应用程序用于格式化整数值。")]),s._v(" "),e("h4",{attrs:{id:"浮点型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浮点型"}},[s._v("#")]),s._v(" 浮点型")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("MySQL数据类型")]),s._v(" "),e("th",[s._v("含义")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("float(m,d)")]),s._v(" "),e("td",[s._v("单精度浮点型  4字节  m总个数，d小数位")])]),s._v(" "),e("tr",[e("td",[s._v("double(m,d)")]),s._v(" "),e("td",[s._v("双精度浮点型  8字节  m总个数，d小数位")])])])]),s._v(" "),e("p",[s._v("浮点型数据类型会有精度丢失的问题，比如小数位设置6位，存入0.45，0.45转换成二进制是个无限循环小数0.01110011100...，无法准确表示，存储的时候会发生精度丢失。")]),s._v(" "),e("p",[s._v("不论是定点还是浮点类型，如果用户指定的精度超出精度范围，则会四舍五入进行处理。")]),s._v(" "),e("h4",{attrs:{id:"定点数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定点数"}},[s._v("#")]),s._v(" 定点数")]),s._v(" "),e("p",[s._v("浮点型在数据库中存放的是近似值，而定点类型在数据库中存放的是精确值，不会丢失精度。定点数以字符串形式存储。")]),s._v(" "),e("p",[s._v("decimal(m,d) 参数m是总个数，d是小数位。")]),s._v(" "),e("h4",{attrs:{id:"字符串"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符串"}},[s._v("#")]),s._v(" 字符串")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("MySQL数据类型")]),s._v(" "),e("th",[s._v("含义")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("char(n)")]),s._v(" "),e("td",[s._v("固定长度，最多255个字节")])]),s._v(" "),e("tr",[e("td",[s._v("varchar(n)")]),s._v(" "),e("td",[s._v("可变长度，最多65535个字节")])]),s._v(" "),e("tr",[e("td",[s._v("tinytext")]),s._v(" "),e("td",[s._v("可变长度，最多255个字节")])]),s._v(" "),e("tr",[e("td",[s._v("text")]),s._v(" "),e("td",[s._v("可变长度，最多65535个字节")])]),s._v(" "),e("tr",[e("td",[s._v("mediumtext")]),s._v(" "),e("td",[s._v("可变长度，最多2的24次方-1个字节")])]),s._v(" "),e("tr",[e("td",[s._v("longtext")]),s._v(" "),e("td",[s._v("可变长度，最多2的32次方-1个字节")])])])]),s._v(" "),e("p",[s._v("查询速度：char > varchar > text")]),s._v(" "),e("p",[s._v("char：定长，效率高，一般用于固定长度的表单提交数据存储 ；例如：身份证号，手机号，电话，密码等。char长度不足时，在右边使用空格填充，而varchar值保存时只保存需要的字符数。")]),s._v(" "),e("p",[s._v("varchar：不定长，效率偏低，内容开头用1到2个字节表示实际长度（长度超过255时需要2个字节），因此最大长度不能超过65535。")]),s._v(" "),e("p",[s._v("nvarchar（存储的是Unicode数据类型的字符）不管是一个字符还是一个汉字，都存为2个字节 ，一般用作中文或者其他语言输入，这样不容易乱码 ；varchar存储汉字是2个字节，其他字符存为1个字节 ，varchar适合输入英文和数字。")]),s._v(" "),e("p",[s._v("text：不需要指定存储长度，能用varchar就不用text。")]),s._v(" "),e("h4",{attrs:{id:"二进制数据-blob"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二进制数据-blob"}},[s._v("#")]),s._v(" 二进制数据（BLOB）")]),s._v(" "),e("p",[s._v("二进制数据类型可存储任何数据，如图像、多媒体、文档等。")]),s._v(" "),e("p",[s._v("BLOB和TEXT存储方式不同，TEXT以文本方式存储，英文存储区分大小写；而Blob是以二进制方式存储，不区分大小写。")]),s._v(" "),e("h4",{attrs:{id:"日期时间类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日期时间类型"}},[s._v("#")]),s._v(" 日期时间类型")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("MySQL数据类型")]),s._v(" "),e("th",[s._v("含义")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("date")]),s._v(" "),e("td",[s._v("日期 '2008-12-2'")])]),s._v(" "),e("tr",[e("td",[s._v("time")]),s._v(" "),e("td",[s._v("时间 '12:25:36'")])]),s._v(" "),e("tr",[e("td",[s._v("datetime")]),s._v(" "),e("td",[s._v("日期时间 '2008-12-2 22:06:44'")])]),s._v(" "),e("tr",[e("td",[s._v("timestamp")]),s._v(" "),e("td",[s._v("自动存储记录修改时间")])])])]),s._v(" "),e("p",[s._v("若定义一个字段为timestamp，这个字段里的时间数据会随其他字段修改的时候自动刷新，所以这个数据类型的字段可以存放这条记录最后被修改的时间。")]),s._v(" "),e("h2",{attrs:{id:"基本命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[s._v("#")]),s._v(" 基本命令")]),s._v(" "),e("h3",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),e("p",[s._v("启动服务："),e("code",[s._v("service mysqld start")])]),s._v(" "),e("p",[s._v("关闭服务："),e("code",[s._v("service mysqld stop")])]),s._v(" "),e("p",[s._v("启动客户端："),e("code",[s._v("mysql -uroot -p")]),s._v("  -u 后不要有空格（Ubuntu有空格）")]),s._v(" "),e("h3",{attrs:{id:"数据库操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库操作"}},[s._v("#")]),s._v(" 数据库操作")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SHOW DATABASES;\nCREATE DATABASE db_name;\nUSE db_name;\nDROP DATABASE db_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表"}},[s._v("#")]),s._v(" 表")]),s._v(" "),e("p",[s._v("创建表："),e("code",[s._v("create table user (id int, name varchar(10))")])]),s._v(" "),e("p",[s._v("清空表数据："),e("code",[s._v("truncate table user;")])]),s._v(" "),e("p",[s._v("查看表结构："),e("code",[s._v("desc table_name/select columns from table_name")])]),s._v(" "),e("p",[e("code",[s._v("SHOW CREATE db")]),s._v(" | "),e("code",[s._v("SHOW CREATE table")]),s._v("：显示创建特定数据库或表的MySQL语句")]),s._v(" "),e("h3",{attrs:{id:"检索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检索"}},[s._v("#")]),s._v(" 检索")]),s._v(" "),e("p",[s._v("检索不同的行：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT DISTINCT vend_id\nFROM products;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("限制结果：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nLIMIT 0, 5; #开始位置，行数|返回从第0行开始的5行数据\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"排序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#排序"}},[s._v("#")]),s._v(" 排序")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nORDER BY prod_name, prod_price DESC; #先按名称排序，再按价格排序 | DESC降序排列，默认ASC升序\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("找出最贵的物品：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_price\nFROM products\nORDER BY prod_price DESC\nLIMIT 1; # 仅返回一行\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("子句顺序：FORM -- ORDER BY -- LIMIT，顺序不对会报错。")]),s._v(" "),e("h3",{attrs:{id:"过滤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过滤"}},[s._v("#")]),s._v(" 过滤")]),s._v(" "),e("p",[s._v("子句操作符：")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("操作符")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("=")]),s._v(" "),e("td",[s._v("等于")])]),s._v(" "),e("tr",[e("td",[s._v("<>")]),s._v(" "),e("td",[s._v("不等于")])]),s._v(" "),e("tr",[e("td",[s._v("!=")]),s._v(" "),e("td",[s._v("不等于")])]),s._v(" "),e("tr",[e("td",[s._v("<")]),s._v(" "),e("td",[s._v("小于")])]),s._v(" "),e("tr",[e("td",[s._v("<=")]),s._v(" "),e("td",[s._v("小于等于")])]),s._v(" "),e("tr",[e("td",[s._v("BETWEEN")]),s._v(" "),e("td",[s._v("两值之间")])])])]),s._v(" "),e("h4",{attrs:{id:"不匹配检查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不匹配检查"}},[s._v("#")]),s._v(" 不匹配检查：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_id, prod_name\nFROM products\nWHERE vend_id <> 1003;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"范围查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#范围查询"}},[s._v("#")]),s._v(" 范围查询：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name, prod_price\nFROM products\nWHERE prod_price BETWEEN 5 AND 10;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"空值检查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#空值检查"}},[s._v("#")]),s._v(" 空值检查")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_price IS NULL;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"计算次序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#计算次序"}},[s._v("#")]),s._v(" 计算次序")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name, prod_price\nFROM products\nWHERE vend_id = 1002 OR vend_id = 1003 AND prod_price >= 10; # AND优先级大于OR\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"in-操作符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#in-操作符"}},[s._v("#")]),s._v(" IN 操作符")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name, product_price\nFROM products\nWHERE vend_id IN (1002, 1003)\nORDER BY prod_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("IN操作符一般比OR操作符清单执行更快。IN的最大优点是可以包含其他SELECT语句，使得能够更动态地建立WHERE子句。")]),s._v(" "),e("h4",{attrs:{id:"not操作符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#not操作符"}},[s._v("#")]),s._v(" NOT操作符")]),s._v(" "),e("p",[s._v("MySQL支持使用NOT 对IN 、BETWEEN 和EXISTS子句取反。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name, product_price\nFROM products\nWHERE vend_id NOT IN (1002, 1003)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"like操作符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#like操作符"}},[s._v("#")]),s._v(" LIKE操作符")]),s._v(" "),e("p",[s._v("% 匹配0到多个任意字符。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_id, prod_name\nFROM products\nWHERE prod_name LIKE '%jet%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("_ 匹配单个字符。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_id, prod_name\nFROM products\nWHERE prod_name LIKE '_jet_';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("通配符搜索比其他简单搜索耗时，不能过度使用通配符。")]),s._v(" "),e("h4",{attrs:{id:"limit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#limit"}},[s._v("#")]),s._v(" LIMIT")]),s._v(" "),e("p",[s._v("limit 0,4 ：从第0条记录开始，取4条")]),s._v(" "),e("h4",{attrs:{id:"正则表达式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式"}},[s._v("#")]),s._v(" 正则表达式")]),s._v(" "),e("p",[s._v("OR 匹配：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_name REGEXP '1000|2000'\nORDER BY prod_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("匹配特定字符：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_name REGEXP '[123] Rely' #匹配1或2或3 [^123]取反\nORDER BY prod_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("匹配范围：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_anem REGEXP '[1-5] Ton';#匹配1-5任意一个数字，[a-z]同理\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("匹配特殊字符：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_anem REGEXP '\\\\.';#转义\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("匹配多个实例:")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_anem REGEXP '\\\\([0-9] sticks?\\\\)'; #?匹配它前面的任何字符出现0次或1次\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("匹配连着的四个数：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_anem REGEXP '[[:digit:]]{4}'; #[:digit:]匹配任意数字\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("定位符：")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("元字符")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("^")]),s._v(" "),e("td",[s._v("文本开始")])]),s._v(" "),e("tr",[e("td",[s._v("$")]),s._v(" "),e("td",[s._v("文本结束")])]),s._v(" "),e("tr",[e("td",[s._v("[[:<:]]")]),s._v(" "),e("td",[s._v("词开始")])]),s._v(" "),e("tr",[e("td",[s._v("[[:>:]]")]),s._v(" "),e("td",[s._v("词结束")])])])]),s._v(" "),e("p",[s._v("查找一个数（包括小数点开始的数）开始的所有产品：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_name\nFROM products\nWHERE prod_name REGEXP '^[0-9\\\\.]'\nORDER BY prod_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("简单的正则表达式测试：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT 'hello' REGEXP '[0-9]';#REGEXP检查返回0或1；此处返回0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"计算字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#计算字段"}},[s._v("#")]),s._v(" 计算字段")]),s._v(" "),e("h3",{attrs:{id:"拼接字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拼接字段"}},[s._v("#")]),s._v(" 拼接字段")]),s._v(" "),e("p",[s._v("MySQL使用Concat()函数实现拼接。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT Concat(RTrim(vend_name), ' (', vend_country, ')') #RTrim()去掉右边空格 | Trim()去掉两边空格\nFROM vend_name\nORDER BY vend_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("返回值："),e("code",[s._v("ACME (USA)")]),s._v("\n使用别名："),e("code",[s._v("SELECT dept AS department FROM t_dept;")])]),s._v(" "),e("h3",{attrs:{id:"计算字段-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#计算字段-2"}},[s._v("#")]),s._v(" 计算字段")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_id, quantity, item_price, quantity*item_price AS expanded_price\nFROM orderitems\nWHERE order_num = 2005;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[s._v("#")]),s._v(" 函数")]),s._v(" "),e("h3",{attrs:{id:"文本处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文本处理"}},[s._v("#")]),s._v(" 文本处理")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_name, Upper(vend_name) AS vend_name_upcase\nFROM vendors\nORDER BY vend_name;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("Soundex()函数，匹配所有同音字符串。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_name, cust_contact\nFROM customers\nWHERE Soundex(cust_contact) = Soundex('Y Lie');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("返回数据："),e("code",[s._v("Tyson Y lee")])]),s._v(" "),e("h3",{attrs:{id:"日期处理函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日期处理函数"}},[s._v("#")]),s._v(" 日期处理函数")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://img.dabin-coder.cn/image/20220530235607.png",alt:""}}),s._v("\n查找2005年9月的所有订单：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_id, order_num\nFROM orders\nWHERE Date(order_date) BETWEEN '2005-09-01' AND '2005-09-30';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("或者")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_id, order_num\nFROM orders\nWHERE Year(order_date) = 2005 AND Month(order_date) = 9;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"数值处理函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数值处理函数"}},[s._v("#")]),s._v(" 数值处理函数")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://img.dabin-coder.cn/image/20220530233617.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"汇总数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#汇总数据"}},[s._v("#")]),s._v(" 汇总数据")]),s._v(" "),e("h3",{attrs:{id:"聚集函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#聚集函数"}},[s._v("#")]),s._v(" 聚集函数")]),s._v(" "),e("p",[s._v("Sum:求和\nAvg:求平均数\nMax:求最大值\nMin:求最小值\nCount:求记录")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT SUM(item_price*quanlity) AS total_price\nFROM orderitems\nWHERE order_num = 2005;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("聚集不同值：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT AVG(DISTINCT prod_price) AS avg_price #只考虑不同价格\nFROM products\nWHERE vend_id = 1003;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"分组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分组"}},[s._v("#")]),s._v(" 分组")]),s._v(" "),e("p",[s._v("单独地使用group  by没意义，它只能显示出每组记录的第一条记录。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT * FROM orders\nGROUP BY cust_id;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("img",{attrs:{src:"http://img.dabin-coder.cn/image/20220530233523.png",alt:""}})]),s._v(" "),e("p",[s._v("除聚集计算语句外，SELECT语句中的每个列都必须在GROUP BY子句中给出。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_id, COUNT(*) AS num_prods #vend_id在GROUP BY子句给出\nFROM products\nGROUP BY vend_id;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。")]),s._v(" "),e("h3",{attrs:{id:"过滤分组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#过滤分组"}},[s._v("#")]),s._v(" 过滤分组")]),s._v(" "),e("p",[s._v("having 用来分组查询后指定一些条件来输出查询结果，having作用和where类似，但是having只能用在group  by场合，并且必须位于group  by之后order  by之前。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_id, COUNT(*) AS orders\nFROM orders\nGROUP BY cust_id\nHAVING COUNT(*) >= 2;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"having和where区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#having和where区别"}},[s._v("#")]),s._v(" having和where区别")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_id FROM orders GROUP BY cust_id HAVING COUNT(cust_id) >= 2;\nSELECT cust_id FROM orders GROUP BY cust_id WHERE COUNT(cust_id) >= 2; #Error Code : 1064\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("第一个sql语句可以执行，但是第二个会报错。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("WHERE子句不起作用，因为过滤是基于分组聚集值而不是特定行值的。")])]),s._v(" "),e("li",[e("p",[s._v("二者作用的对象不同，where子句作用于表和视图，having作用于组。")])]),s._v(" "),e("li",[e("p",[s._v("WHERE在数据分组前进行过滤，HAVING在数据分组后进行过滤。")])])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_id, COUNT(*) AS num_prods\nFROM products\nWHERE prod_price >= 10\nGROUP BY vend_id\nHAVING COUNT(*) >= 2;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("WHERE子句过滤所有prod_price至少为10的行。然后按vend_id分组数据，HAVING子句过滤计数为2或2以上的分组。")]),s._v(" "),e("h3",{attrs:{id:"select-子句顺序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#select-子句顺序"}},[s._v("#")]),s._v(" SELECT 子句顺序")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT\nFROM\nWHERE\nGROUP BY\nHAVING\nORDER BY\nLIMIT\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"子查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#子查询"}},[s._v("#")]),s._v(" 子查询")]),s._v(" "),e("p",[s._v("由于性能的限制，不能嵌套太多的子查询。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_id\nFROM orders\nWHERE order_num IN (SELECT order_num\n                    FROM orderitems\n                    WHERE prod_id = 'TNT2');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接"}},[s._v("#")]),s._v(" 连接")]),s._v(" "),e("h3",{attrs:{id:"内连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内连接"}},[s._v("#")]),s._v(" 内连接")]),s._v(" "),e("p",[s._v("找出供应商生产的产品。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_name, prod_name\nFROM vendors INNER JOIN products\nON vendors.vend_id = products.vend_id; #连接条件使用on子句\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("等价于：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_name, prod_name\nFROM vendors, products\nWHERE vendors.vend_id = products.vend_id;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("没有给出连接条件的话，会得到两张表的笛卡尔积。")]),s._v(" "),e("h3",{attrs:{id:"自连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自连接"}},[s._v("#")]),s._v(" 自连接")]),s._v(" "),e("p",[s._v("找出生产nike的供应商生产的所有物品。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT prod_id, prod_name\nFROM products AS p1, products AS p2\nWHERE p1.vend_id = p2.vend_id\n\tAND p2.prod_id = 'nike';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"自然连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自然连接"}},[s._v("#")]),s._v(" 自然连接")]),s._v(" "),e("p",[s._v("natural join是对两张表中字段名和数据类型都相同的字段进行"),e("strong",[s._v("等值连接")]),s._v("，并返回符合条件的结果 。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT * FROM role NATURAL JOIN user_role;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("返回结果：")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://img.dabin-coder.cn/image/20220530235619.png",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"内连接-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内连接-2"}},[s._v("#")]),s._v(" 内连接")]),s._v(" "),e("p",[s._v("显示符合连接条件的记录。没有设置连接条件则返回笛卡尔积的结果。join 默认是 inner join。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT * FROM role INNNER JOIN user_role\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("返回结果：")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://img.dabin-coder.cn/image/20220530235640.png",alt:""}})]),s._v(" "),e("p",[s._v("join…using(column)按指定的属性做等值连接。\njoin…on tableA.column1 = tableB.column2 指定条件。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT * FROM role INNER JOIN user_role ON role.role_id = user_role.role_id\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("返回结果：")]),s._v(" "),e("p",[e("img",{attrs:{src:"http://img.dabin-coder.cn/image/20220530235654.png",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"外连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#外连接"}},[s._v("#")]),s._v(" 外连接")]),s._v(" "),e("p",[s._v("左外联接（Left Outer Join）：除了匹配2张表中相关联的记录外，还会匹配左表中剩余的记录，右表中未匹配到的字段用NULL表示。\n右外联接（Right Outer Join）：除了匹配2张表中相关联的记录外，还会匹配右表中剩余的记录，左表中未匹配到的字段用NULL表示。\n在判定左表和右表时，要根据表名出现在Outer Join的左右位置关系。")]),s._v(" "),e("p",[s._v("查找所有客户及其订单，包括没有下过订单的客户。使用左外连接，保留左边表的所有记录。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT customer.cust_id, order.order_num\nFROM customers LEFT OUTER JOIN orders\nON customers.cust_id = order.cust_id;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"多表连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多表连接"}},[s._v("#")]),s._v(" 多表连接")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT goal.player, eteam.teamname, game.stadium, game.mdate\nFROM game JOIN goal\nON game.id = goal.matchid \nJOIN eteam\nON eteam.id = goal.teamid\nWHERE eteam.id = 'GRE'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"组合查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组合查询"}},[s._v("#")]),s._v(" 组合查询")]),s._v(" "),e("h3",{attrs:{id:"union"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#union"}},[s._v("#")]),s._v(" UNION")]),s._v(" "),e("p",[s._v("UNION中的每个查询必须包含相同的列、表达式或聚集函数。列数据类型必须兼容。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT vend_id, prod_id\nFROM products\nWHERE prod_price <= 5\nUNION\nSELECT vend_id, prod_id\nFROM products\nWHERE vend_id IN (1001, 1002);\n-- 等价于\nSELECT vend_id, prod_id\nFROM products\nWHERE prod_price < = 5\n\tAND vend_id IN (1001, 1002);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("UNION 默认会去掉重复的行，使用 UNION ALL可以返回所有匹配行。")]),s._v(" "),e("h2",{attrs:{id:"全文搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全文搜索"}},[s._v("#")]),s._v(" 全文搜索")]),s._v(" "),e("p",[s._v("为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。在对表列进行适当设计后，MySQL会自动进行所有的索引和重新索引。")]),s._v(" "),e("p",[s._v("启动全文搜索（仅在MyISAM数据库引擎中支持全文本搜索）：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE productnotes\n(\n\tnote_id int NOT NULL AUTO_INCREMENT,\n    note_text text NULL,\n    PRIMARY KEY(note_id),\n    FULLTEXT(note_text)\n) ENGINE=MyISAM;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("在定义之后，MySQL自动维护该索引。在增加、更新或删除行时，索引随之自动更新。")]),s._v(" "),e("p",[s._v("不要在导入数据时使用FULLTEXT，。应该首先导入所有数据，然后再修改表，定义FULLTEXT，这样可以更快导入数据。")]),s._v(" "),e("p",[s._v("使用全文搜索：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT note_text\nFROM productnotes\nWHERE Match(note_text) Against('shoe'); #Match指定搜索列，Against指定搜索词\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("返回结果："),e("code",[s._v("nike shoes is good")]),s._v("，搜索不区分大小写。")]),s._v(" "),e("p",[s._v("全文搜索会对返回结果进行排序，具有高等级的行先返回：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT note_text,\n\tMatch(note_text) Against('shoes') AS rank #等级由MySQL根据行中词的数目、唯一词的数目、整个索引中词的总数以及包含该词的行的数目计算出来。\nFROM productnotes;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("全文搜索数据是有索引的，速度快。")]),s._v(" "),e("h2",{attrs:{id:"表操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表操作"}},[s._v("#")]),s._v(" 表操作")]),s._v(" "),e("h3",{attrs:{id:"创建表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建表"}},[s._v("#")]),s._v(" 创建表")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TABLE productnotes\n(\n\tnote_id int NOT NULL AUTO_INCREMENT,\n    note_text text NULL,\n    quanlity int NOT NULL DEFAULT 1, # 默认值，只支持常量\n    PRIMARY KEY(note_id),\n    FULLTEXT(note_text)\n) ENGINE=MyISAM;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("主键中只能使用NOT NULL值的列。")]),s._v(" "),e("h3",{attrs:{id:"更新表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新表"}},[s._v("#")]),s._v(" 更新表")]),s._v(" "),e("p",[s._v("数据库表的更改不能撤销，应先做好备份。")]),s._v(" "),e("p",[s._v("添加列：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE vendors\nADD vend_phone CHAR(20);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("删除列：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE vendors\nDROP COLUMN vend_phone;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("更改列属性：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE vendors\nMODIFY vend_phone CHAR(16);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("复杂的表结构更改一般需要手动删除过程：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("用新的列布局创建一个新表；")])]),s._v(" "),e("li",[e("p",[s._v("使用INSERT SELECT语句，从旧表复制数据到新表；")])]),s._v(" "),e("li",[e("p",[s._v("检验包含所需数据的新表；")])]),s._v(" "),e("li",[e("p",[s._v("重命名旧表（如果确定，可以删除它）；")])]),s._v(" "),e("li",[e("p",[s._v("用旧表原来的名字重命名新表；")])]),s._v(" "),e("li",[e("p",[s._v("重新创建触发器、存储过程、索引和外键。")])])]),s._v(" "),e("h3",{attrs:{id:"约束"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#约束"}},[s._v("#")]),s._v(" 约束")]),s._v(" "),e("p",[s._v("添加主键约束：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE vendors\nADD CONSTRAINT pk_vendors PRIMARY KEY(vend_id);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("删除主键约束：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE vendors\nDROP PRIMARY KEY;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("添加外键约束：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE products\nADD FOREIGN KEY(vendor_id) REFERENCES vendors(vendor_id);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("删除外键约束：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE products DROP FOREIGN KEY vendor_id;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"删除表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除表"}},[s._v("#")]),s._v(" 删除表")]),s._v(" "),e("p",[e("code",[s._v("DROP TABLE cumstomers")])]),s._v(" "),e("h3",{attrs:{id:"重命名表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重命名表"}},[s._v("#")]),s._v(" 重命名表")]),s._v(" "),e("p",[e("code",[s._v("RENAME TABLE cusmtomers TO cust")])]),s._v(" "),e("h2",{attrs:{id:"列操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#列操作"}},[s._v("#")]),s._v(" 列操作")]),s._v(" "),e("h3",{attrs:{id:"插入数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插入数据"}},[s._v("#")]),s._v(" 插入数据")]),s._v(" "),e("p",[s._v("MySQL用单条INSERT语句处理多个插入比使用多条INSERT语句快。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("INSERT INTO customers(cust_name, cust_city)\n\tVALUES('Tyson', 'GD'),\n\t\t('sophia','GZ');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("INSERT操作可能很耗时（特别是有很多索引需要更新时），而且它可能降低等待处理的SELECT语句的性能。降低INSERT语句的优先级："),e("code",[s._v("INSERT LOW_PRIORITY INTO")])]),s._v(" "),e("h3",{attrs:{id:"更新数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新数据"}},[s._v("#")]),s._v(" 更新数据")]),s._v(" "),e("p",[s._v("如果用UPDATE语句更新多行，并且在更新这些行中的一行或多行时出一个现错误，则整个UPDATE操作被取消。为了在发生错误时也继续进行更新，可使用IGNORE关键字："),e("code",[s._v("UPDATE IGNORE customers...")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("UPDATE customers\nSET cust_city = NULL\nWHERE cust_id = 1005;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("返回值是受影响的记录数。")]),s._v(" "),e("h3",{attrs:{id:"删除数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除数据"}},[s._v("#")]),s._v(" 删除数据")]),s._v(" "),e("p",[s._v("如果想从表中删除所有行，不要使用DELETE。可使用TRUNCATE TABLE语句，它完成相同的工作，但速度更快（TRUNCATE实际是删除原来的表并重新创建一个表，而不是逐行删除表中的数据）。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DELETE FROM customers\nWHERE cust_id = 1006;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("如果执行DELETE语句而不带WHERE子句，表的所有数据都将被删除。MySQL没有撤销操作，应该非常小心地使用UPDATE和DELETE。")]),s._v(" "),e("p",[s._v("delete使用别名的时候，要在delete和from间加上删除表的别名。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DELETE a #加上删除表的别名\nFROM table1 a\nWHERE a.status = 0\nAND EXISTS\n\t(SELECT b.id FROM table2 b\n    WHERE b.id = a.id);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"truncate、delete与drop区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#truncate、delete与drop区别"}},[s._v("#")]),s._v(" truncate、delete与drop区别")]),s._v(" "),e("p",[e("strong",[s._v("相同点：")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("truncate和不带where子句的delete、以及drop都会删除表内的数据。")])]),s._v(" "),e("li",[e("p",[s._v("drop、truncate都是DDL语句(数据定义语言)，执行后会自动提交。")])])]),s._v(" "),e("p",[e("strong",[s._v("不同点：")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("truncate 和 delete 只删除数据不删除表的结构；drop 语句将删除表的结构被依赖的约束、触发器、索引；")])]),s._v(" "),e("li",[e("p",[s._v("速度，一般来说: drop> truncate > delete。")])])]),s._v(" "),e("h2",{attrs:{id:"引擎"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引擎"}},[s._v("#")]),s._v(" 引擎")]),s._v(" "),e("p",[s._v("InnoDB是一个可靠的事务处理引擎，它不支持全文本搜索；")]),s._v(" "),e("p",[s._v("MEMORY在功能等同于MyISAM，但由于数据存储在内存（不是磁盘）中，速度很快（特别适合于临时表）；")]),s._v(" "),e("p",[s._v("MyISAM是一个性能极高的引擎，它支持全文本搜索，但不支持事务处理。")]),s._v(" "),e("p",[s._v("外键不能跨引擎，用一个引擎的表不能引用使用不同引擎的表的外键。")]),s._v(" "),e("h2",{attrs:{id:"视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视图"}},[s._v("#")]),s._v(" 视图")]),s._v(" "),e("p",[s._v("视图为虚拟的表。视图提供了一种MySQL的SELECT语句层次的封装，可用来简化数据处理以及重新格式化基础数据或保护基础数据。")]),s._v(" "),e("h3",{attrs:{id:"应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[s._v("#")]),s._v(" 应用")]),s._v(" "),e("ul",[e("li",[s._v("重用SQL语句。")]),s._v(" "),e("li",[s._v("保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限。")]),s._v(" "),e("li",[s._v("更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。")])]),s._v(" "),e("h3",{attrs:{id:"限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#限制"}},[s._v("#")]),s._v(" 限制")]),s._v(" "),e("ul",[e("li",[s._v("与表一样，视图必须唯一命名")]),s._v(" "),e("li",[s._v("视图不能索引，也不能有关联的触发器或默认值。")]),s._v(" "),e("li",[s._v("视图可以和表一起使用。例如，编写一条联结表和视图的SELECT语句。")]),s._v(" "),e("li",[s._v("ORDER BY可以用在视图中，但如果从该视图检索数据SELECT中也含有ORDER BY，那么该视图中的ORDER BY将被覆盖。")])]),s._v(" "),e("h3",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("p",[e("code",[s._v("CREATE VIEW")]),s._v("：创建视图")]),s._v(" "),e("p",[e("code",[s._v("SHOW CREATE VIEW viewname")]),s._v("：查看创建视图的语句")]),s._v(" "),e("p",[e("code",[s._v("DROP VIEW viewname")]),s._v("：删除视图")]),s._v(" "),e("p",[e("code",[s._v("CREATE ORREPLACE VIEW")]),s._v("：更新视图，相当于先用"),e("code",[s._v("DROP")]),s._v("再用"),e("code",[s._v("CREATE")])]),s._v(" "),e("h3",{attrs:{id:"简化复杂连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简化复杂连接"}},[s._v("#")]),s._v(" 简化复杂连接")]),s._v(" "),e("p",[s._v("创建一个视图，返回订购了任意产品的客户列表。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE VIEW productcustomers AS\nSELECT cust_name, orders, orderitems\nFROM customers, orders, orderitems\nWHERE orderitems.order_num = orders.order_num\n\tAND customers.cust_id = orders.cust_id;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("使用视图：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT cust_name, cust_contact\nFROM productcustomers\nWHERE prod_id = 'nike';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"更新视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新视图"}},[s._v("#")]),s._v(" 更新视图")]),s._v(" "),e("p",[s._v("对视图增加或删除行，实际上是对其基表增加或删除行。视图主要用于数据检索。")]),s._v(" "),e("h2",{attrs:{id:"存储过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储过程"}},[s._v("#")]),s._v(" 存储过程")]),s._v(" "),e("p",[s._v("为以后的使用而保存的一条或多条MySQL语句的集合。可将其视为批文件。\n为什么使用存储过程：")]),s._v(" "),e("ul",[e("li",[s._v("把复杂处理进行封装，简化复杂的操作；")]),s._v(" "),e("li",[s._v("提高性能，存储过程比单独SQL语句更快；")])]),s._v(" "),e("h3",{attrs:{id:"创建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建"}},[s._v("#")]),s._v(" 创建")]),s._v(" "),e("p",[s._v("返回产品平均价格的存储过程：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE PROCEDURE productpricing() # 可以接受参数\nBEGIN\n\tSELECT Avg(prod_price) AS priceaverage\n\tFROM products;\nEND;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("BEGIN/END 用来限定存储过程体。此段代码仅创建了存储过程，未执行。")]),s._v(" "),e("h3",{attrs:{id:"调用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#调用"}},[s._v("#")]),s._v(" 调用")]),s._v(" "),e("p",[e("code",[s._v("CALL productpricing()")])]),s._v(" "),e("h3",{attrs:{id:"删除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除"}},[s._v("#")]),s._v(" 删除")]),s._v(" "),e("p",[s._v("存储过程在创建之后，被保存在服务器上以供使用，直至被删除。\n"),e("code",[s._v("DROP PROCEDURE productpricing IF EXISTS")])]),s._v(" "),e("h3",{attrs:{id:"参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),e("p",[s._v("MySQL支持IN（传递给存储过程）、OUT（从存储过程传出）和INOUT（对存储过程传入和传出）类型的参数。\n接受订单号并返回该订单的金额：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE PROCEDURE ordertotal(\n\tIN ordernum INT,\n\tOUT ordersum DECIMAL(8, 2)\n)\nBEGIN\n\tSELECT Sum(item_price * quantity)\n\tFROM orderitems\n\tWHERE order_num = ordernum\n\tINTO ordersum;\nEND;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("调用存储过程："),e("code",[s._v("CALL ordertotal(20, @total);")]),s._v("\n显示订单金额："),e("code",[s._v("SELECT @total;")])]),s._v(" "),e("h3",{attrs:{id:"实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),e("p",[s._v("获取订单税后金额（订单金额+税收）。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE PROCEDURE ordertotal(\n\tIN onum INT,\n\tIN taxable BOOLEAN, # 是否计税\n\tOUT ototal DECIMAL(8, 2)\n) COMMENT 'order total, adding tax'\nBEGIN\n\tDECLARE total DECIMAL(8, 2);\n\tDECLARE taxrate INT DEFAULT 6;\n\n\tSELECT Sum(item_price * quanlity)\n\tFROM orderitems\n\tWHERE order_num = onum\n\tINTO total;\n\n\tIF taxable THEN\n\t\tSELECT total + (total / 100 * taxrate) INTO total;\n\tEND IF;\n\t-- SELECT total INTO ototal;\nEND;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[s._v("调用存储过程：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CALL ordertotal(20005, 1, @total);\nSELECT @total;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"查看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看"}},[s._v("#")]),s._v(" 查看")]),s._v(" "),e("p",[s._v("创建存储过程的 CREATE 语句。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SHOW CREATE PROCEDURE ordertotal;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("获得包括何时、由谁创建等详细信息的存储过程列表，使用"),e("code",[s._v("SHOW PROCEDURE STATUS LIKE 'ordertotal';")])]),s._v(" "),e("p",[s._v("查看存储过程状态：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SHOW PROCEDURE status;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"游标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#游标"}},[s._v("#")]),s._v(" 游标")]),s._v(" "),e("p",[s._v("存储了游标之后，应用程序可以根据需要滚动或浏览其中的数据。MySQL游标只能用于存储过程（和函数）。")]),s._v(" "),e("h3",{attrs:{id:"创建游标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建游标"}},[s._v("#")]),s._v(" 创建游标")]),s._v(" "),e("p",[s._v("DECLARE 命名游标。存储过程处理完成后，游标便消失（游标只存在于存储过程）。定义游标之后，便可以打开它。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE PROCEDURE processorders()\nBEGIN\n\tDECLARE ordernumbers CURSOR\n\tFOR\n\tSELECT order_num FROM orders;\nEND;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"使用游标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用游标"}},[s._v("#")]),s._v(" 使用游标")]),s._v(" "),e("p",[e("code",[s._v("OPEN ordernumbers")]),s._v(" 打开游标。\n"),e("code",[s._v("CLOSE ordernumbers")]),s._v(" CLOSE释放游标使用的所有内部内存和资源。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE PROCEDURE processorders()\nBEGIN\n\n\tDECLARE done BOOLEAN DEFAULT 0;\n\tDECLARE o INT;\n\tDECLARE t DECIMAL(8, 2);\n\t\n\tDECLARE ordernumbers CURSOR\n\tFOR\n\tSELECT order_num FROM orders;\n\t\n\tDECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1; #游标移到最后\n\t\n\tCREATE TABLE IF NOT EXISTS ordertotals\n\t\t(order_num INT, total DECIMAL(8,2));\n\t-- 打开游标\n\tOPEN ordernumbers;\n\t\n\t-- 循环\n\tREPEAT\n\tFETCH ordernumbers INTO o;\n\tCALL ordertotal(o, 1, t);\n\t\n\t-- 插入订单号和订单金额\n\tINSERT INTO ordertotals(order_num, total)\n\tVALUES(o, t);\n\t\n\t-- done为1结束循环\n\tUNTIL done END REPEAT;\n\t\n\tCLOSE ordernumbers;\nEND;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("p",[s._v("存储过程还在运行中创建了一个新表，。这个表将保存存储过程生成的结果。FETCH取每个order_num，然后用CALL执行另一个存储过程，计算每个订单税后金额。最后，用INSERT保存每个订单的订单号和金额。")]),s._v(" "),e("h2",{attrs:{id:"触发器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#触发器"}},[s._v("#")]),s._v(" 触发器")]),s._v(" "),e("p",[s._v("提供SQL语句自动执行的功能。DELETE/INSERT/UPDATE支持触发器，其他SQL语句不支持。")]),s._v(" "),e("h3",{attrs:{id:"创建-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-2"}},[s._v("#")]),s._v(" 创建")]),s._v(" "),e("p",[s._v("创建触发器四要素：1.唯一的触发器名（MySQL5规定触发器名在表中唯一，数据库没要求）；2.触发器关联的表；3.相应的SQL语句；4.何时执行（处理之前或者之后）。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TRIGGER newproduct AFTER INSERT ON products #插入之后执行\nFOR EACH ROW SELECT 'product added'; #对每个插入行执行\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("只有表支持触发器，视图不支持。单一触发器不能与多个事件或多个表关联，如果需要对INSERT和UPDATE操作执行触发器，则应该定义两个触发器。")]),s._v(" "),e("h3",{attrs:{id:"删除-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除-2"}},[s._v("#")]),s._v(" 删除")]),s._v(" "),e("p",[e("code",[s._v("DROP TRIGGER newproduct")])]),s._v(" "),e("h3",{attrs:{id:"使用触发器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用触发器"}},[s._v("#")]),s._v(" 使用触发器")]),s._v(" "),e("p",[s._v("INSERT 触发器可饮用名为 NEW  的虚拟表，访问被插入的行。NEW中的值也可以被更新（允许更改被插入的值）。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TRIGGER neworder AFTER INSERT ON order\nFOR EACH ROW SELECT NEW.order_num; #返回新的订单号\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("DELETE 触发器可以引用名为 OLD 的虚拟表，访问被删除的行。OLD中的值全都是只读的，不能更新。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TRIGGER deleteorder BEFORE DELETE ON orders\nFOR EACH ROW\nBEGIN\n\tINSERT INTO archive_orders(order_num, cust_id)\n\tVALUES(OLD.order_num, OLD.cust_id);\nEND;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("订单删除之前保存订单信息到存档表。")]),s._v(" "),e("p",[s._v("UPDATE 触发器可以引用名为 OLD 的虚拟表访问以前的值，引用一个名为NEW的虚拟表访问新更新的值。NEW 值可被更新，OLD 值是只读的。")]),s._v(" "),e("p",[s._v("下面的例子保证州名缩写总是大写。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE TRIGGER updatevendor BEFORE UPDATE ON vendor\nFOR EACH ROW SET NEW.vend_state = Upper(NEW.vend_state);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"事务处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#事务处理"}},[s._v("#")]),s._v(" 事务处理")]),s._v(" "),e("p",[s._v("事务处理可以用来维护数据库的完整性。它保证成批的MySQL操作要么完全执行，要么完全不执行。")]),s._v(" "),e("p",[s._v("CREATE/DROP 操作不能回退，即便可以执行回退操作，回退不会有效果。")]),s._v(" "),e("p",[s._v("执行事务过程，一旦某个SQL失败，则之前执行成功的SQL会被自动撤销。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("START TRANSACTION;\nDELETE FROM orderitems WHERE order_num = 20010;\nDELETE FROM orders WHERE order_num = 20010;\nCOMMIT;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("当COMMIT或ROLLBACK语句执行后，事务会自动关闭。")]),s._v(" "),e("h3",{attrs:{id:"保留点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保留点"}},[s._v("#")]),s._v(" 保留点")]),s._v(" "),e("p",[s._v("为了支持回退部分事务处理，必须能在事务处理块中合适的位置放置占位符。这样，如果需要回退，可以回退到某个占位符。")]),s._v(" "),e("p",[s._v("保留点在事务处理完成后自动释放。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("...\nSAVEPOINT delete1;\n...\nROLLBACK TO delete1;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#权限"}},[s._v("#")]),s._v(" 权限")]),s._v(" "),e("h3",{attrs:{id:"管理用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#管理用户"}},[s._v("#")]),s._v(" 管理用户")]),s._v(" "),e("p",[s._v("MySQL用户账号和信息存储在名为mysql的MySQL数据库中。获取用户账号列表。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("USE mysql;\nSELECT user FROM user;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("创建用户账号："),e("code",[s._v("CREATE USER tyson IDENTIFIED BY 'abc123'")])]),s._v(" "),e("p",[s._v("修改密码："),e("code",[s._v("SET PASSWORD FOR tyson = Password('xxx');")]),s._v("，新密码需传递到Password()函数进行加密。")]),s._v(" "),e("p",[s._v("设置当前用户密码："),e("code",[s._v("SET PASSWORD = Password('xxx');")])]),s._v(" "),e("p",[s._v("重命名账号："),e("code",[s._v("RENAME USER tyson TO tom")])]),s._v(" "),e("p",[s._v("删除用户账号："),e("code",[s._v("DROP USER tyson")])]),s._v(" "),e("p",[s._v("查看访问权限："),e("code",[s._v("SHOW GRANTS FOR tyson")]),s._v("，返回"),e("code",[s._v("USAGE ON *.*")]),s._v("则表示没有权限。")]),s._v(" "),e("p",[s._v("授予访问权限："),e("code",[s._v("GRANT SELECT ON mall.# TO tyson")]),s._v("，允许用户在mall数据库所有表使用SELECT。")]),s._v(" "),e("p",[s._v("撤销权限："),e("code",[s._v("REVOKE SELECT, INSERT ON mall.* FROM tyson")]),s._v("，被撤销的访问权限必须存在，否则会出错。")]),s._v(" "),e("p",[s._v("GRANT和REVOKE可在几个层次上控制访问权限：\n 整个服务器，使用GRANT ALL和REVOKE ALL；\n 整个数据库，使用ON database.*；\n 特定的表，使用ON database.table；\n 特定的列；\n 特定的存储过程。")]),s._v(" "),e("h2",{attrs:{id:"优化性能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化性能"}},[s._v("#")]),s._v(" 优化性能")]),s._v(" "),e("p",[s._v("使用EXPLAIN语句让MySQL解释它将如何执行一条SELECT语句。")]),s._v(" "),e("p",[s._v("如果一个简单的WHERE子句返回结果所花的时间太长，则可以断定其中使用的某些列就是需要索引的对象。")]),s._v(" "),e("p",[s._v("避免使用OR。通过使用多条SELECT语句和连接它们的UNION语句，会有极大的性能改进。")]),s._v(" "),e("p",[s._v("LIKE很慢，最好是使用FULLTEXT而不是LIKE。")]),s._v(" "),e("p",[s._v("很多高性能的应用都会对关联查询进行分解，有如下的优势：\n1 、让缓存效率更高。如果某张表很少变化，那么基于该表的查询就可以重复利用查询缓存结果。\n2 、将查询分解后，执行单个查询可以减少锁的竞争。\n3 、在应用层做关联，可以更容易对数据库进行拆分，更容易做到高性能和可扩展。\n4 、查询本身效率也可能会有所提升。例如 IN()代替关联查询，可能比随机的关联更高效。\n5 、减少冗余记录得查询。\n6 、更进一步，这样做相当于在应用中实现了哈希关联，而不是使用 MySQL 得嵌套循环关联。某些场景哈希关联得效率要高很多。")]),s._v(" "),e("h2",{attrs:{id:"索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[s._v("#")]),s._v(" 索引")]),s._v(" "),e("h3",{attrs:{id:"创建索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建索引"}},[s._v("#")]),s._v(" 创建索引")]),s._v(" "),e("p",[s._v("ALTER TABLE用来创建普通索引、UNIQUE索引或PRIMARY KEY索引。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ALTER TABLE table_name ADD INDEX index_name (column_list)\nALTER TABLE table_name ADD UNIQUE (column_list)\nALTER TABLE table_name ADD PRIMARY KEY (column_list)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("CREATE INDEX可对表增加普通索引或UNIQUE索引。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE INDEX index_name ON table_name (column_list)\nCREATE UNIQUE INDEX index_name ON table_name (column_list)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("在创建索引时，可以规定索引能否包含重复值。如果不包含，则索引应该创建为PRIMARY KEY或UNIQUE索引。")]),s._v(" "),e("h3",{attrs:{id:"删除索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除索引"}},[s._v("#")]),s._v(" 删除索引")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DROP INDEX index_name ON talbe_name\nALTER TABLE table_name DROP INDEX index_name\nALTER TABLE table_name DROP PRIMARY KEY #只有一个主键，不需要指定索引名\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"查看索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看索引"}},[s._v("#")]),s._v(" 查看索引")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("show index from tblname;\nshow keys from tblname;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);